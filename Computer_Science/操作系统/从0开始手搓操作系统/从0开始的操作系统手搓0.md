# 从0开始的操作系统手搓教程

​	动笔于2025年2月10日正午12点。

## 前言

​	2023年十月份，我作为一个大二的学生第一次接触到了操作系统这个课程，那个时候，我刚刚粗略的学习过MIT的OS Lab（实验都没完成，直到2025年年首，我才把我自己本应该完成的工作完成了），于此同时，我也开始了我的第一个高难度的项目，也就是从一篇空白，搓出来一个可以运行的，最简单的一个操作系统出来！

​	事实上，有非常多的操作系统的教程很优秀，我这里非常愿意举例几个！

> [SamyPesse/How-to-Make-a-Computer-Operating-System: How to Make a Computer Operating System in C++ (github.com)](https://github.com/SamyPesse/How-to-Make-a-Computer-Operating-System)
>
> [Cooi-Boi/Tiny-OS: 《操作系统真象还原》自写源码实现 并于CSDN上面详细记录操作系统的整个实现流程 包括Debug步骤与书籍中错误勘误 Bochs2.6.8 Gcc4.4 本书除最后三个小功能其余全部实现 6k行左右的代码 希望能帮到各位 ^^ (github.com)](https://github.com/Cooi-Boi/Tiny-OS)

​	然而笔者注意到，他们使用的工具链都实在是太过于老旧，以至于当我鼓起勇气看一眼他们使用的工具链的时候，发现基本上都已经过时十几年以上了，对于不加以修改的使用这些教程的代码，要不就是连环的报错，要不就是卡死在模式的接力，而对于新手则是完全不知道到底发生了什么。只好沮丧的离开，或者一些像我这样的人愿意折返折腾他们使用的旧的工具链。事实证明，最后只会把自己的环境搞得一团糟。笔者写的时候，测试了三个组操作系统环境。

- WSL（Windows Subsystem For Linux）（已经测试了Arch WSL和Typical Ubuntu WSL），
- Ubuntu24.04，
- Arch Linux

​	都可以正确的配置目标环境（Arch则是艰难一些，我们不得不去费力的编译gcc4.4和bochs，到头来一地鸡毛）

​	现在作为前言，我将简单的阐述一下，开始之前你大概需要做什么：

1. 耐下心来，笔者也是操作系统新手！也在之前的手搓中遇到非常令自己沮丧的难题，但是坚持不懈，总算度过了一个艰难的一个月把问题排除出来。他们可能是——写错了配置，抄错了代码，把我们的东西放到了不该放到的位置，设置错误了链接顺序导致非法的地址访问...拜托，任何一个都可以使得我们头痛不已！但是，这些笔者认为是一个成为一个合格程序员的必要的考验——我们需要锻炼出一个能力，在一个有限资料的环境下，解决我们遇到的难题。
2. 学会查找资料！不是自己闭关锁国的猛干，那没有意义。我们需要的是查找手册，查找他人书写的博客，对比其他人的方法，倒逼自己学习新的技术解决自己遇到的问题。而不是完全照抄他人的解决方案。以《操作系统还原真相》为例子，仍然有不少的人post他们的博客几乎是完全原文，**没有任何**思索的搬运别人的产出。这是不好的！无助于提升自己的能力！
3. 尝试新的工具。笔者也是翻阅了gcc和bochs的文档，仔细阅读了每一个交流，期待当我点击下一页，或者是滚动我的鼠标滚轮的时候，我终于可以看到自己一直期待的那个答案。好吧！还是很艰难，笔者在解决的时候，基本上天天都是通宵到三点钟，亦或者是早上五点中起来继续我的钻研。当然，这里看我自己写的博客的各位不必如此，不如当作茶后笑谈，吹吹水（笑
4. 确保自己的电脑可以运行虚拟机！笔者必须要说明的是——笔者因为学习的内容都很经典，水平更是鸡毛，所以**只会书写32位的操作系统而不是64位的**。也没有太多的时间真正的扎根到小几万页的`Intel/AMD`架构手册去一页一页寻找答案。所以，这里要给我自己的懈怠道个歉！为此，笔者使用的是bochs虚拟机（注意是非gdb调试的），相对而言，他非常方便我们的调试。至少，笔者给出的Makefile默认都是调试模式，这方便于我们的控制和观察操作系统的行为和现象。当然，感兴趣的朋友自然可以尝试使用bochs-with-gdb，但是截止到目前，笔者的工作重心仍然在**实现这个操作系统，并完成尽可能多的功能上**，所以，请有余力的朋友自行尝试，如果可以，愿意共享自己的工作，随时发给我Issue或者是PR（Pull Request），我第一时间查看您的工作！

## 所以，我...

​	现在，当你下定决心，而不是打起退堂鼓，嗯下关闭浏览器标签界面的话，那就给自己打打气，说明你愿意付出行动，开始你的操作系统手搓旅程！

​	笔者现在给出这些setup配置，请您按照需要自行的完成您的配置工作！到这里，笔者的碎碎念已经完成！祝您好运！