# Power && Performance

## Chapter I: 早期Intel架构

​	我们聊聊8086，这个是Intel首次采用x86架构设计的CPU。这个东西非常具备划时代的意义。

​	当你启动一个处理器：即对处理器做复位操作的时候，芯片将会开启全局的重启。他会赋予我们的处理器完全全新的，可知的状态（既过去如何完全与现在没有关系）。对于32位芯片。我们的系统需要首先运行在16位实地址模式，下面，更新CR0寄存器的Page Protection位为1进入保护模式。我们的Intel系列芯片将这40多年的发展压缩到了这一眨眼的时间完成（我的另一意思就是：现在所有的Intel的芯片都会兼容之前的芯片！也就是说，现在你的电脑仍然可以run 1980s的程序，只要都是Intel的芯片）

### Intel 8086

​	x86实际上是一个系列，他包含了8086, 80186, ... , 80386等芯片，他们都是86架构发展线的产品。8086这个芯片具备划时代的意义。我们就拿这个来谈。

​	他有三大设计准则：

- 各个特化的构件的使用是解耦合的（也就是说8086是提供最小运行集的，其他的功能需要按照级联或者是外设的方式集成进来）
- 对于接下来产生的86系列芯片都要兼容——保证在快速迭代的产品中旧有的程序还会被支持
- 层次化的总线设置，支持简单的，或者是复杂的数据流传递。

​	特化的部件分为两个十分清晰的大部分：执行单元（EU）与总线接口单元（BIU）。EU就是中心的执行单元：包含了内部的处理器和所使用到的寄存器。EU是没有办法访问到内存和外设，他需要BIU的辅助对外沟通。

### 系统状态

​	我们下面走马观花一下常见的存储体系

​	三大层次如下所示：处理器的寄存器组 + RAM + 硬存。依次从高向下，我们的沟通速度依次向下递减，成本也依次向下递减。我们的处理器的寄存器的处理速度几乎可以说是跟处理器自身一样的快，意味着如果我们的数据是存储在处理器寄存器组的话，压根就不花费时间就可以取到数据。

### 地址空间

​	8086的确将内存分成两个部分：一个是处理器的内存地址空间，还有一个就是外设的映射部分。20位的地址线就是在说明我们的地址寻址空间为 2 * 20 bit = 1 MB. 然后对于外设则是只接受64KB大小的映射。（16位）

​	 在8086中，我们的地址是分段的——指代的是一个逻辑段地址。这个地址很有意思：他是由一个段地址 + 偏移量组合而成的。对于8086还没有虚拟模式这个概念，我们所使用到的地址都是实际的物理地址。其转化非常的简单：

```
Addr = Segs << 1 + Offset
```

​	在8086中有四种段地址。
